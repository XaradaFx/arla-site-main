<script>
  tsParticles.load("tsparticles", {
    background: { color: { value: "#0e0e10" } },
    particles: {
      color: { value: "#a259ff" },
      links: { enable: true, color: "#a259ff", distance: 130 },
      move: { enable: true, speed: 1.2 },
      size: { value: 2 },
      number: { value: 60, density: { enable: true, area: 800 } }
    }
  });

  fetch("/api/me")
    .then(res => {
      if (res.status === 401) {
        window.location.href = "/login";
        throw new Error("Usuário não autenticado");
      }
      return res.json();
    })
    .then(me => {
      const userId = me.user_id;

      return fetch(`/api/usuario/${userId}`);
    })
    .then(res => res.json())
    .then(data => {
      document.getElementById("xaracoins").textContent = data.xaracoins + " Xaracoins";
    })
    .catch(() => {
      document.getElementById("xaracoins").textContent = "Erro ao carregar";
    });
</script>
